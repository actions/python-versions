name: Python versions runner
on:
  workflow_dispatch:
    inputs:
      versions:
        description: 'Versions to build'
        required: true
        default: '["", ""]'
      publish-releases:
        description: 'Whether to publish releases'
        required: true
        default: 'false'

defaults:
  run:
    shell: pwsh

jobs:
  trigger_builds:
    name: Trigger python build
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        version: ${{ fromJson(github.event.inputs.versions) }}
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      
      - run: ./builders/python-versions-runner.ps1 -Version "${{ matrix.version }}"
        name: Trigger python workflow
        env:
          PERSONAL_TOKEN: ${{ secrets.PERSONAL_TOKEN }}